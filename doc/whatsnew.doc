                Базовая версия - Parma Tosser 1.06

====================== Отличия версии 1.06.01 alpha =======================

   Исправлен ряд ошибок. Перечислять не буду, потому что не помню.

   Новая методика обработки удаляемых эхо-областей.
   Ключевое слово DeletedAreaDays устанавливает число дней, в течение которых
письма в удаленную orphaned область будут игнорироваться.
   Ключевое слово DeletedArea (устанавливается тоссером автоматически).
   При выполнении команд Serv и Hand при раскомментированном ключевом слове
ManagerKillOrphan вместо безусловного удаления области из конфигов сейчас
производится замена строки описания области на строку, содержащую вместо
ключевого слова EchoArea комбинацию ключевого слова DeletedArea и текущей
даты в формате YYYYMMDD. После этого поведение ParToss в отношении области
изменяется - письма, пришедшие в эту область, игнорируются. Кроме этого,
сейчас при каждой модификации конфигов при подписке/отписке производится
проверка всех строк DeletedArea на истечение срока хранения области, и если
этот срок превысил DeletedAreaDays, область удаляется из конфига. Если же
за время хранения области приходит письмо с запросом на подписку на эту
область, производится подписка в обычном режиме, а строка с DeletedArea
удаляется из конфига.
   !!! Прошу обратить внимание - это альфа! Глубокая альфа! Я только проверил
работоспособность всех внесенных изменений, версия не тестировалась в боевой
обстановке. Я крайне, даже КРАЙНЕ не рекомендую ставить эту версию на рабочей
станции с работающим эхоменеджером. Все остальное вроде бы должно работать.

   Реализован порт под линукс. Эта версия не включена в дистрибутив. Сегодня
исходные тексты текущей версии будут переданы авторам порта, через несколько
дней скомпилированная ими версия будет доступна на моем сервере:
ftp://kibr.spb.ru/pub/partoss/

====================== Отличия версии 1.06.02 alpha =======================

   Исправлена ошибка, приводившая к удалению из конфига ключевого слова
DeletedAreaDays.
   Исправлена ошибка, из-за которой дата в строке DeletedArea формировалась как
YYYYMD (не добавлялся ведущий 0 для месяцев и дней).
   В порядке борьбы с программами, не готовыми к 2000 году, встроено приведение
даты во входных пакетах вида "01 Jan 100  19:34:14" к формату
"01 Jan 00  19:34:14". Других некорректных форматов я пока не видел.
   Адреса From и To в бинарном заголовке эхописьма сейчас сохраняются при
выполнении команды Purge. В предыдущих версиях в заголовок подставлялся адрес,
полученный из кладжей @MSGID, @REPLY, @FMPT, @TOPT, @INTL.
   Выпуск версии под линукс задерживается по уважительным причинам.

====================== Отличия версии 1.06.03 alpha =======================

   Исправлена ошибка, из-за которой в строке DeletedArea происходило
склеивание даты и тэга, если в исходной строке ключевое слово EchoArea и тэг
были разделены одним пробелом.
   Более подробный вывод в лог причин помещения письма в BadArea.
   Несколько небольших косметических исправлений.

====================== Отличия версии 1.06.04 alpha =======================

   Несколько косметических исправлений.
   Ряд изменений внесен Сергеем Фадеевым и тщательно мной не тестировался.
Эти изменения будут задокументированы в следующих версиях.

====================== Отличия версии 1.06.05 alpha =======================

   Починена команда Hand, сломанная в предыдущей версии. Сейчас будет корректно
обработана команда
ParToss -cAltern.Cfg hand .1 #List
которая во всех предыдущих версиях сообщала об ошибке - "Address 0:0/0.0 not
found". То есть сейчас можно задавать дополнительные параметры и ключи командной
строки как до, так и после команды Hand - лишь бы все слова этой команды шли
подряд.
   В дополнение к ключу описания области -$bk появился ключ -$bn, принудительно
отключающий удаление дупов по этой области.
   В строке описания линка сейчас можно указать максимальный размер почтового
архива без указания максимального размера пакетов, просто опустив размер пакета,
то есть синтаксис этого блока сейчас [<PktSize>][,<ArcSize>] вместо требуемого
в предыдущих версиях [<PktSize>[,<ArcSize>]].
   Авторство всех изменений принадлежит Сергею Фадееву (2:5020/877).

====================== Отличия версии 1.06.06 alpha =======================

   Исправлена ошибка, из-за которой не обрабатывался модификатор K при задании
размера почтовых архивов.
   Исправлена некорректная работа команды Purge, приводившая к сбрасыванию бита
Read (проявлялось только при работе с редактором MadMED).
   Исправлена ошибка, из-за которой нельзя было пользоваться командой %Address
для изменения параметров других линков - в строках описания этих линков слово
Link заменялось на LinkManager.

====================== Отличия версии 1.06.07 beta ========================

   Исправлена ошибка предыдущих версий, из-за которой после выполнения Purge
оставались файлы *._qd, *._qi.
   Исправлено несколько мелких неточностей.

====================== Отличия версии 1.06.08 alpha =======================

   Исправлена ошибка в алгоритме обработки DeletedArea, из-за которой строки с
этим ключевым словом удалялись при следующем же запуске эхоменеджера.
   Сделана обработка шаблонов в функции сравнения двух адресов. То есть сейчас,
например, можно написать
TinySeenBys 2:5030/177.*
   Исправлена старая ошибка, приводившая к искажению параметров PktSize и
ArcSize в описаниях линков после их модификации эхоменеджером (значение типа
long выводилось как short).
   Исправлена старая ошибка, из-за которой не работал режим PurgeProcents.

====================== Отличия версии 1.06.09 alpha =======================

   Исправлены еще две ошибки в алгоритме обработки DeletedArea. Одна из них
приводила к аварийному завершению при получении писем в удаленную область, а
вторая - к тому, что вместо области DeletedArea удалялась вместе с базой другая
область. Внимание! В этом алгоритме еще есть ошибки и нерешенные проблемы, но
в целом он уже почти рработоспособен.
   Исправлена ошибка предыдущей версии - не работала паковка нетмейла.
   Лог-файл сейчас открывается и закрывается для каждой записи. В следующей
версии будет сделано ключевое слово LogAlwaysOpen <YES|NO>.

====================== Отличия версии 1.06.10 alpha =======================

   Насчет ключевого слова LogAlwaysOpen я соврал.
   Исправлена недоработка функции LinkF - независимо от установки LinkLength
линковка производилась по первым 15 символам поля Subj.
   Несколько исправлений и новшеств внесены Сергеем Фадеевым. Из новшеств самое
серьезное - модификация ключевого слова SaveControlInfo:
SaveControlInfo <Yes|No|Path>
   При указании варианта Path из писем при помещении в базу (или при выполнении
Purge) удаляются строки SEEN-BY, а строки @PATH остаются.
   Кроме этого, исправлено несколько ошибок.

====================== Отличия версии 1.06.11 alpha =======================

   Немного доработан вывод на экран при линковке.
   В архив добавлена первая версия ParToss под DOS32. Осторожнее!

====================== Отличия версии 1.06.12 alpha =======================

   Исправлена ошибка с выводом статистики при LogLevel 4.
   Экспериментальный режим алиасов эхо-областей. Автор - Сергей Фадеев.

; AreaAlias <address> <oldechotag> <newechotag>
; При указании этого ключевого слова при тоссинге эхи <oldechotag> из пакетов,
; пришедших от линка <address>, ParToss считает, что тоссит эху <newechotag>.
; Также при экспорте эхи <newechotag> на линка <address> в пакетах указывается,
; что письма идут в эху <oldechotag>. Обращаю внимание: на эхоменеджер это клю-
; чевое слово никакого влияния не оказывает, и отписываться/подписываться надо
; на эху <newechotag>!
;
AreaAlias 2:5020/2200.0 N5020.SYSOP N5020.SYSOP.ALT

====================== Отличия версии 1.06.13 alpha =======================

   Исправлена ошибка, приводившая при некоторых условиях к аварийному завершению
при выполнении команды Out.

====================== Отличия версии 1.06.14 alpha =======================

   Исправлена ошибка, приводившая иногда к аварийному завершению программы при
SaveControlInfo Path и малом значении Buffers.
   Исправлена ошибка, из-за которой при указании Buffers 64K реальный размер
буфера устанавливался в 2048 байт.
   Исправлена ошибка, приводившая к повторному созданию эхо-областей, если их
название было записано в нижнем регистре.

====================== Отличия версии 1.06.15 alpha =======================

   Сейчас при обработке писем к эхоменеджеру проверяется, не пустой ли пароль
установлен для данного линка. Линки с непрописанным паролем с этой версии
общаться с эхо-менеджером не могут.

   Несколько изменений в алгоритме формирования имени для автосоздаваемой эхо-
области.
 * Новое ключевое слово - FirstGoodName. Если оно раскомментировано, имена эхо-
областей вида AUTOxxxx при автосоздании области сейчас будут формироваться не 
по порядку, а заполнять "дыры" в нумерации. То есть при наличии эхо-областей с
именами AUTO0000, AUTO0002, AUTO0003 вновь созданная эхо-область получит имя
AUTO0004 при закомментированном ключевом слове FirstGoodName и AUTO0001, если
это ключевое слово раскомментировано.
 * Попутно исправлена ошибка, присутствовавшая в алгоритме проверки наличия
в каталоге файлов ранее удаленной области, приводившая к тому, что этот алгоритм
попросту не работал.
 * Кроме этого, сейчас при автосоздании областей по письмам от линков, описанных
в LinkAdvanced с указанной областью-шаблоном, в качестве пути для создаваемой
области принимается путь области-шаблона, а не EchoPath.
 * Итак, алгоритм формирования имени сейчас выглядит следующим образом:
- проверяется присутствие линка в списке LinkAdvanced и, если линк в этом списке
  обнаружен, наличие у него области-шаблона;
- устанавливается каталог для создаваемой области - из описания области-шаблона
  или, при ее отсутствии, из переменной EchoPath;
- при наличии ключевого слова LongAreaPath формируется имя, и на этом все;
- счетчик имен устанавливается в 0;
- при закомментированном ключевом слове FirstGoodName производится просмотр
  списка эхо-областей и установка счетчика в положение "область с максимальным
  значением xxxx плюс единица";
- в установленном каталоге производится проверка на наличие файлов вида
  AUTOxxxx.sqd, AUTOxxxx.sqi, AUTOxxxx.sqp. При обнаружении любого из таких
  файлов счетчик xxxx увеличивается на единицу, и проверка повторяется до тех
  пор, пока не будет обнаружен номер, для которого указанных файлов нет;
- имя сформировано.
 * Обратите внимание, что при разнесении эхо-областей по разным каталогам для
разных линков и при включении FirstGoodName области в разных каталогах будут
иметь одинаковые имена.

   Исправлена ошибка, приводившая к трапам при выполнении карбонкопирования из
нетмейла и при помещении нетмейловых писем в дупы.

====================== Отличия версии 1.10 =======================

   Parma Tosser сейчас имеет статус freeware и распространяется с исходными
текстами.

====================== Отличия версии 1.10.02 =======================
 by George Mozhaev

  Испpавлены некотоpые неточности с именами в нижнем pегистpе, тепеpь все 
файлы в нижнем pегистpе.
  Испpавлена ошибка с подпиской "нyлевой" ноды на линyксе:
пpоблема была в том, что в пyтях вместо пpивычного '\' полyчаем '/',  что не 
есть хоpошо, т.к. этот символ есть в 4D-адpесе и из auto0??? бpалась пеpвая 
цифpа и полyчалась пpесловyтая нода.
  Для стандаpтных боксов T-Mail весь пyть не пеpеводится в веpхний pегистp,
а только имя боксов.
  Испpавлена ошибка с пеpеводом вpемени из линyкса в дос, тепеpь и постится 
ноpмально.
  Испpавлено деление на 0 для ключевого слова PurgeProcents, деление заменено 
yмножением.
  Добавлены ключевые слова в partoss.cfg:
  - Umask ххх
    где ххх - число. pаботает только под линyкс.
  - DoNotSearchInboundPKT
    не искать пpи тоссинге во входящих каталогах пакеты (*.pkt)

====================== Отличия версии 1.10.02/SAF =======================
 by Sergey Fadeyev

  Мелкий багфикс.

====================== Отличия веpсии 1.10.03 =======================
 by George Mozhaev

  Добавлено ключевое слово в partoss.cfg:
  - KeepLogFileOpened - хpанить лог-файл постоянно откpытым

====================== Отличия версии 1.10.04/SAF =======================
 by Sergey Fadeyev

  Добавлено ключевое слово в partoss.cfg:
  - StripToFTS	- очищать аттрибуты входящих писем в соответствии с FTS-1 
  (сбрасываются значения аттрибутов Recd, Sent, InTransit, Orphan, 
  KillSent, Local, HoldForPickup, FileRequest, FileUpdateReq).

  Отключено ключевое слово в partoss.cfg:
  - TestForMustDie

====================== Отличия версии 1.10.05/SAF =======================
 by Sergey Fadeyev

  Попытка исправить работу LinkAdvanced - не работало указание эхообласти
  в качестве шаблона.

====================== Отличия версии 1.10.051/SAF =======================
 by Sergey Fadeyev

  Исправлена работа FirstGoodName (by George Mozhaev).

  Hемного причёсаны исходники.
